{"ast":null,"code":"import { InjectedConnector } from '@web3-react/injected-connector';\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector';\nimport { BscConnector } from '@binance-chain/bsc-connector';\nimport { ConnectorNames } from 'toolkit/uikit';\nimport { ethers } from 'ethers';\nimport getNodeUrl from './getRpcUrl';\nconst POLLING_INTERVAL = 12000;\nconst rpcUrl = getNodeUrl();\nconst chainId = parseInt(process.env.REACT_APP_CHAIN_ID, 10);\nconst injected = new InjectedConnector({\n  supportedChainIds: [43114, 137, 56, 25, 250, 1, 43113]\n});\n// const injected = new InjectedConnector({ supportedChainIds: [43113] })\n\nconst walletconnect = new WalletConnectConnector({\n  rpc: {\n    [chainId]: rpcUrl\n  },\n  bridge: 'https://pancakeswap.bridge.walletconnect.org/',\n  qrcode: true\n  // pollingInterval: POLLING_INTERVAL,\n});\nconst avaxConnector = new BscConnector({\n  supportedChainIds: [43114, 137]\n});\nexport const connectorsByName = {\n  [ConnectorNames.Injected]: injected,\n  [ConnectorNames.WalletConnect]: walletconnect,\n  [ConnectorNames.AVAX]: avaxConnector\n};\nexport const getLibrary = provider => {\n  const library = new ethers.providers.Web3Provider(provider);\n  library.pollingInterval = POLLING_INTERVAL;\n  return library;\n};\n\n/**\n * BSC Wallet requires a different sign method\n * @see https://docs.binance.org/smart-chain/wallet/wallet_api.html#binancechainbnbsignaddress-string-message-string-promisepublickey-string-signature-string\n */\nexport const signMessage = async (provider, account, message) => {\n  var _provider$provider;\n  if (window.BinanceChain) {\n    const {\n      signature\n    } = await window.BinanceChain.bnbSign(account, message);\n    return signature;\n  }\n\n  /**\n   * Wallet Connect does not sign the message correctly unless you use their method\n   * @see https://github.com/WalletConnect/walletconnect-monorepo/issues/462\n   */\n  if ((_provider$provider = provider.provider) !== null && _provider$provider !== void 0 && _provider$provider.wc) {\n    var _provider$provider2;\n    const wcMessage = ethers.utils.hexlify(ethers.utils.toUtf8Bytes(message));\n    const signature = await ((_provider$provider2 = provider.provider) === null || _provider$provider2 === void 0 ? void 0 : _provider$provider2.wc.signPersonalMessage([wcMessage, account]));\n    return signature;\n  }\n  return provider.getSigner(account).signMessage(message);\n};","map":{"version":3,"names":["InjectedConnector","WalletConnectConnector","BscConnector","ConnectorNames","ethers","getNodeUrl","POLLING_INTERVAL","rpcUrl","chainId","parseInt","process","env","REACT_APP_CHAIN_ID","injected","supportedChainIds","walletconnect","rpc","bridge","qrcode","avaxConnector","connectorsByName","Injected","WalletConnect","AVAX","getLibrary","provider","library","providers","Web3Provider","pollingInterval","signMessage","account","message","_provider$provider","window","BinanceChain","signature","bnbSign","wc","_provider$provider2","wcMessage","utils","hexlify","toUtf8Bytes","signPersonalMessage","getSigner"],"sources":["/Users/namratapatel/upwork/SmartFinance-OmniDex/src/utils/web3React.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { InjectedConnector } from '@web3-react/injected-connector'\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector'\nimport { BscConnector } from '@binance-chain/bsc-connector'\nimport { ConnectorNames } from 'toolkit/uikit'\nimport { ethers } from 'ethers'\nimport Web3 from \"web3\";\nimport getNodeUrl from './getRpcUrl'\n\n\nconst POLLING_INTERVAL = 12000\nconst rpcUrl = getNodeUrl()\nconst chainId = parseInt(process.env.REACT_APP_CHAIN_ID, 10)\n\n\n\nconst injected = new InjectedConnector({ supportedChainIds: [43114,137,56,25,250,1,43113] })\n// const injected = new InjectedConnector({ supportedChainIds: [43113] })\n\nconst walletconnect = new WalletConnectConnector({\n  rpc: { [chainId]: rpcUrl },\n  bridge: 'https://pancakeswap.bridge.walletconnect.org/',\n  qrcode: true,\n  // pollingInterval: POLLING_INTERVAL,\n})\n\nconst avaxConnector = new BscConnector({ supportedChainIds: [43114,137] })\n\nexport const connectorsByName: { [connectorName in ConnectorNames]: any } = {\n\n  [ConnectorNames.Injected]: injected,\n  [ConnectorNames.WalletConnect]: walletconnect,\n  [ConnectorNames.AVAX]: avaxConnector,\n}\n\nexport const getLibrary = (provider): ethers.providers.Web3Provider => {\n  const library = new ethers.providers.Web3Provider(provider)\n  library.pollingInterval = POLLING_INTERVAL\n  return library\n}\n\n/**\n * BSC Wallet requires a different sign method\n * @see https://docs.binance.org/smart-chain/wallet/wallet_api.html#binancechainbnbsignaddress-string-message-string-promisepublickey-string-signature-string\n */\nexport const signMessage = async (provider: any, account: string, message: string): Promise<string> => {\n  if (window.BinanceChain) {\n    const { signature } = await window.BinanceChain.bnbSign(account, message)\n    return signature\n  }\n\n  /**\n   * Wallet Connect does not sign the message correctly unless you use their method\n   * @see https://github.com/WalletConnect/walletconnect-monorepo/issues/462\n   */\n  if (provider.provider?.wc) {\n    const wcMessage = ethers.utils.hexlify(ethers.utils.toUtf8Bytes(message))\n    const signature = await provider.provider?.wc.signPersonalMessage([wcMessage, account])\n    return signature\n  }\n\n  return provider.getSigner(account).signMessage(message)\n}\n"],"mappings":"AACA,SAASA,iBAAiB,QAAQ,gCAAgC;AAClE,SAASC,sBAAsB,QAAQ,qCAAqC;AAC5E,SAASC,YAAY,QAAQ,8BAA8B;AAC3D,SAASC,cAAc,QAAQ,eAAe;AAC9C,SAASC,MAAM,QAAQ,QAAQ;AAE/B,OAAOC,UAAU,MAAM,aAAa;AAGpC,MAAMC,gBAAgB,GAAG,KAAK;AAC9B,MAAMC,MAAM,GAAGF,UAAU,CAAC,CAAC;AAC3B,MAAMG,OAAO,GAAGC,QAAQ,CAACC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAE,EAAE,CAAC;AAI5D,MAAMC,QAAQ,GAAG,IAAIb,iBAAiB,CAAC;EAAEc,iBAAiB,EAAE,CAAC,KAAK,EAAC,GAAG,EAAC,EAAE,EAAC,EAAE,EAAC,GAAG,EAAC,CAAC,EAAC,KAAK;AAAE,CAAC,CAAC;AAC5F;;AAEA,MAAMC,aAAa,GAAG,IAAId,sBAAsB,CAAC;EAC/Ce,GAAG,EAAE;IAAE,CAACR,OAAO,GAAGD;EAAO,CAAC;EAC1BU,MAAM,EAAE,+CAA+C;EACvDC,MAAM,EAAE;EACR;AACF,CAAC,CAAC;AAEF,MAAMC,aAAa,GAAG,IAAIjB,YAAY,CAAC;EAAEY,iBAAiB,EAAE,CAAC,KAAK,EAAC,GAAG;AAAE,CAAC,CAAC;AAE1E,OAAO,MAAMM,gBAA4D,GAAG;EAE1E,CAACjB,cAAc,CAACkB,QAAQ,GAAGR,QAAQ;EACnC,CAACV,cAAc,CAACmB,aAAa,GAAGP,aAAa;EAC7C,CAACZ,cAAc,CAACoB,IAAI,GAAGJ;AACzB,CAAC;AAED,OAAO,MAAMK,UAAU,GAAIC,QAAQ,IAAoC;EACrE,MAAMC,OAAO,GAAG,IAAItB,MAAM,CAACuB,SAAS,CAACC,YAAY,CAACH,QAAQ,CAAC;EAC3DC,OAAO,CAACG,eAAe,GAAGvB,gBAAgB;EAC1C,OAAOoB,OAAO;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMI,WAAW,GAAG,MAAAA,CAAOL,QAAa,EAAEM,OAAe,EAAEC,OAAe,KAAsB;EAAA,IAAAC,kBAAA;EACrG,IAAIC,MAAM,CAACC,YAAY,EAAE;IACvB,MAAM;MAAEC;IAAU,CAAC,GAAG,MAAMF,MAAM,CAACC,YAAY,CAACE,OAAO,CAACN,OAAO,EAAEC,OAAO,CAAC;IACzE,OAAOI,SAAS;EAClB;;EAEA;AACF;AACA;AACA;EACE,KAAAH,kBAAA,GAAIR,QAAQ,CAACA,QAAQ,cAAAQ,kBAAA,eAAjBA,kBAAA,CAAmBK,EAAE,EAAE;IAAA,IAAAC,mBAAA;IACzB,MAAMC,SAAS,GAAGpC,MAAM,CAACqC,KAAK,CAACC,OAAO,CAACtC,MAAM,CAACqC,KAAK,CAACE,WAAW,CAACX,OAAO,CAAC,CAAC;IACzE,MAAMI,SAAS,GAAG,QAAAG,mBAAA,GAAMd,QAAQ,CAACA,QAAQ,cAAAc,mBAAA,uBAAjBA,mBAAA,CAAmBD,EAAE,CAACM,mBAAmB,CAAC,CAACJ,SAAS,EAAET,OAAO,CAAC,CAAC;IACvF,OAAOK,SAAS;EAClB;EAEA,OAAOX,QAAQ,CAACoB,SAAS,CAACd,OAAO,CAAC,CAACD,WAAW,CAACE,OAAO,CAAC;AACzD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}